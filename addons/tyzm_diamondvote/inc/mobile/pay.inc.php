<?php
 goto pogrI; X8ejA: pdo_update("\x63\157\162\x65\x5f\160\x61\x79\154\157\x67", array("\157\x70\145\x6e\151\144" => $_W["\x6f\160\x65\156\151\x64"], "\x74\x61\x67" => iserializer(array("\x61\x63\151\x64" => $_W["\x61\x63\x69\144"], "\165\x69\144" => $_W["\155\145\x6d\142\x65\x72"]["\165\151\144"]))), array("\x70\154\x69\144" => $paylog["\x70\154\x69\144"])); goto eqEWS; NvQyC: wXUMX: goto oOSsL; TxvuE: $giftdata = array("\162\x69\144" => $rid, "\164\151\144" => $id, "\x75\x6e\151\141\143\151\x64" => $_W["\x75\x6e\x69\x61\x63\151\144"], "\x6f\141\165\x74\150\x5f\x6f\160\145\x6e\x69\x64" => $userinfo["\157\x61\x75\164\x68\x5f\x6f\x70\145\156\x69\x64"], "\157\160\145\156\x69\144" => $userinfo["\157\x70\145\x6e\x69\x64"], "\x61\x76\x61\x74\x61\x72" => $userinfo["\141\166\141\164\141\162"], "\x6e\x69\143\x6b\x6e\141\155\145" => $userinfo["\156\x69\x63\153\156\141\155\x65"], "\165\163\x65\x72\x5f\x69\x70" => $_W["\143\154\x69\145\x6e\x74\x69\x70"], "\x67\151\146\164\x69\x63\157\156" => $gift["\x67\151\x66\164\x69\143\x6f\x6e"], "\147\x69\146\164\143\157\x75\156\x74" => $count, "\147\151\146\164\164\x69\x74\154\145" => $gift["\147\151\146\164\164\x69\164\x6c\145"], "\x67\151\146\164\166\x6f\164\x65" => $gift["\147\x69\x66\164\166\x6f\164\x65"] * $count, "\146\x65\145" => $params["\146\x65\x65"], "\160\164\151\144" => $tid, "\x69\163\160\x61\171" => 0, "\x73\164\x61\x74\165\x73" => 0, "\x63\162\x65\x61\x74\x65\x74\151\x6d\x65" => time()); goto PYETX; UCQa_: D7dzJ: goto njLoW; Gs8X7: $tid = date("\131\155\144\110\151") . random(12, 1); goto ToryT; PYETX: $gMhP4 = !pdo_insert($this->tablegift, $giftdata); goto qb_Vo; wTV7l: aMdsA: goto qiKZV; kmFMk: $condition .= "\40\x41\x4e\104\40\x73\164\x61\164\165\x73\75\x31\40"; goto RKI8K; hgkkH: $gift = $giftdata[$_GPC["\147\151\146\x74\x69\144"]]; goto DDFQX; h4g3S: $wechat_payment["\163\x65\143\x72\145\x74"] = $account["\163\145\x63\162\145\x74"]; goto AwHZ9; rsu5v: $count = intval($_GPC["\143\x6f\165\156\x74"]); goto ami4t; Z3aTX: if ($reply["\166\x6f\x74\145\x65\156\144\x74\151\x6d\x65"] < time()) { goto rG5kF; } goto uB2Wy; FDHKH: $lLXic = !empty($reply["\x73\164\141\164\165\163"]); goto rEt0b; DbwD8: suSj0: goto NuLw7; zWJYw: die(json_encode(array("\x65\162\162\157\162" => "\61", "\x6d\x73\x67" => "\346\x97\xa0\346\xb3\x95\350\x8e\267\xe5\217\x96\x4f\x50\x4e\x45\x49\104\357\xbc\214\xe8\257\xb7\xe6\x9f\xa5\xe7\x9c\213\xe6\230\xaf\xe5\220\246\345\x80\237\xe6\235\x83\xe6\210\226\xe9\x85\x8d\xe7\xbd\256\345\xa5\275\xe5\205\254\344\xbc\227\345\x8f\xb7\357\xbc\x81\50\x30\61\x30\x31\x29"))); goto E345O; m1ZWj: global $_W, $_GPC; goto LK668; qEp_G: $rid = intval($_GPC["\x72\x69\x64"]); goto DG3Ih; aYDwq: $reply = pdo_fetch("\123\x45\x4c\105\x43\124\40\162\151\144\54\164\x69\164\154\x65\x2c\x73\x68\x61\162\145\164\151\x74\x6c\145\x2c\163\150\x61\162\145\151\x6d\147\x2c\163\150\141\x72\x65\x64\x65\163\x63\x2c\143\x6f\x6e\146\x69\x67\x2c\147\x69\146\164\144\141\164\141\x2c\x73\x74\x61\x72\x74\x74\151\x6d\x65\54\145\x6e\144\164\x69\155\145\x2c\141\x70\x73\x74\x61\162\x74\x74\151\x6d\x65\x2c\x61\160\x65\x6e\x64\x74\x69\x6d\x65\x2c\166\157\x74\x65\163\164\x61\162\164\x74\151\155\x65\54\166\157\x74\145\145\156\x64\x74\151\155\145\54\163\x74\x61\164\x75\163\x20\40\x46\x52\117\115\x20" . tablename($this->tablereply) . "\x20\x57\110\105\x52\105\x20\162\x69\144\40\75\40\x3a\x72\151\x64\x20", array("\x3a\x72\151\144" => $rid)); goto Hsj0Q; IBi1g: $userinfo = $this->oauthuser; goto ZmpXx; njLoW: $aXeW_ = !(!empty($paylog) && $paylog["\x73\x74\141\x74\x75\163"] != "\x30"); goto dJWmo; I0oMI: $og0hB = !($gift["\147\x69\146\164\x70\162\x69\x63\x65"] * $count > $diamondsy && !empty($reply["\x65\166\x65\x72\x79\x6f\156\145\144\x69\141\x6d\x6f\x6e\x64"])); goto UTWlN; KzRsP: goto Up9sZ; goto wTV7l; xNn2g: if ($zq7q_) { goto aTIew; } goto Db1gE; P1Igo: if ($reply["\x76\x6f\x74\145\163\164\141\162\x74\x74\151\155\145"] > time()) { goto ylFB8; } goto Z3aTX; b4iLT: $voteuser = pdo_fetch("\123\105\x4c\105\x43\x54\x20\52\x20\106\x52\x4f\115\40" . tablename($this->tablevoteuser) . "\x20\127\110\x45\122\x45\40\x72\x69\x64\40\75\40\x3a\162\x69\x64\x20\x41\116\x44\40\x20\x69\x64\40\75\x20\72\151\144\40", array("\x3a\162\x69\x64" => $rid, "\72\x69\x64" => $id)); goto ea_s9; MEos9: $paylog["\x74\x69\164\154\145"] = $getparams["\x74\x69\164\x6c\145"]; goto Yu3Hq; tNFm2: die(json_encode(array("\145\162\x72\157\x72" => "\61", "\155\x73\147" => "\xe5\267\262\347\273\223\xe6\235\x9f\xe6\x8a\225\xe7\xa5\250\xef\274\201"))); goto DbwD8; tfmQP: goto suSj0; goto ped4y; qiKZV: die(json_encode(array("\x65\162\x72\157\x72" => "\61", "\x6d\x73\147" => "\xe6\x9c\200\xe5\244\x9a\350\277\230\350\203\275\xe9\200\x81" . $diamondsy . "\345\x85\x83\xe7\xa4\274\xe7\x89\251\357\274\x8c\344\277\256\346\224\271\345\x90\216\xe5\x86\215\351\x80\201\xef\274\201"))); goto yCmdO; ZmpXx: $oauth_openid = $userinfo["\x6f\141\165\164\150\137\x6f\160\x65\x6e\151\x64"]; goto qPnAT; lL91U: die(json_encode(array("\x65\x72\x72\x6f\x72" => "\61", "\x6d\163\147" => "\345\217\202\xe6\x95\xb0\xe9\x94\x99\350\257\xaf"))); goto NvQyC; bvry9: $setting = uni_setting($_W["\165\x6e\151\141\x63\151\144"], array("\x70\x61\x79\x6d\145\x6e\164")); goto vmOoR; ami4t: $count = empty($count) ? 1 : $count; goto IBi1g; KCTHy: if ($BYMSe) { goto HHDcG; } goto Nv9ub; imPFe: unset($reply["\143\157\156\146\x69\147"]); goto FDHKH; WydX2: die(json_encode(array("\145\x72\x72\157\x72" => "\61", "\155\163\x67" => "\346\xb4\xbb\345\x8a\250\350\277\230\346\xb2\xa1\346\234\x89\xe5\274\x80\345\xa7\x8b"))); goto ebC6l; E345O: VWJyv: goto aYDwq; sCWV2: s9I1h: goto n4y0c; g0jFs: if ($vyW3x) { goto VWJyv; } goto zWJYw; o1u6V: pdo_insert("\x63\157\x72\x65\x5f\x70\141\171\x6c\157\147", $paylog); goto UIHkZ; u2BkI: $paylog = pdo_get("\x63\157\x72\145\137\x70\x61\171\154\157\x67", array("\x75\x6e\x69\x61\143\151\x64" => $_W["\x75\x6e\x69\x61\x63\151\x64"], "\x6d\157\x64\165\154\145" => $getparams["\x6d\x6f\144\x75\154\x65"], "\x74\x69\144" => $getparams["\x74\x69\144"])); goto Aw_Zu; rEt0b: if ($lLXic) { goto zaukj; } goto UQMGi; ToryT: $params = array("\164\x69\144" => $tid, "\157\162\144\145\x72\x73\156" => $tid, "\x74\151\x74\154\145" => "\346\x8a\x95\xe7\245\xa8\xe9\200\x81\xe7\xa4\274\xe4\xbb\x98\xe6\xac\276", "\146\145\x65" => sprintf("\x25\56\62\146", $gift["\x67\151\x66\164\x70\x72\151\143\145"] * $count), "\165\x73\x65\162" => $_W["\155\145\155\142\145\x72"]["\165\x69\x64"], "\x6d\x6f\144\x75\154\x65" => $this->module["\156\141\155\x65"]); goto TxvuE; eFQ6n: $moduleid = empty($moduleid) ? "\x30\60\60\x30\x30\60" : sprintf("\x25\60\x36\x64", $moduleid); goto bjGiC; SiQ9o: $tqT2Q = !($reply["\151\163\143\x68\145\x63\x6b\145\144"] == 1); goto KYjTB; kIzjY: $wechat_payment_params = wechat_build($params_b, $wechat_payment); goto OyTfo; qPjd5: $condition = ''; goto SiQ9o; o7qya: xA_57: goto Gs8X7; Hsj0Q: $reply = array_merge($reply, unserialize($reply["\143\x6f\156\x66\x69\147"])); goto imPFe; I_Vjp: die(json_encode(array("\x65\162\x72\x6f\162" => "\x31", "\x6d\163\x67" => "\346\234\252\xe5\274\200\xe5\247\213\xe6\x8a\x95\xe7\245\xa8\357\274\x81"))); goto tfmQP; UTWlN: if ($og0hB) { goto xA_57; } goto CpNM8; ped4y: rG5kF: goto tNFm2; j_993: if ($W_GVw) { goto wXUMX; } goto lL91U; yCmdO: Up9sZ: goto o7qya; UQMGi: die(json_encode(array("\145\x72\x72\x6f\x72" => "\x31", "\155\163\147" => "\xe6\xb4\273\345\x8a\xa8\345\267\262\xe7\246\201\xe7\224\xa8"))); goto wNgku; IWWnA: message(error(0, $wechat_payment_params), '', "\141\x6a\x61\x78", false); goto AtPyk; ExIo3: die(json_encode(array("\x65\x72\162\157\162" => "\x31", "\155\163\147" => "\346\264\273\xe5\x8a\xa8\xe5\267\262\xe7\xa6\x81\xe7\224\xa8"))); goto Ats8T; qb_Vo: if ($gMhP4) { goto b5eDr; } goto IGhJP; f46Tm: if ($t8w1D) { goto LjF53; } goto WydX2; YKaxW: $wechat_payment_params = wechat_proxy_build($params_b, $wechat_payment); goto sCWV2; AwHZ9: $params_b = array("\164\x69\144" => $paylog["\164\x69\x64"], "\146\x65\x65" => $paylog["\143\x61\162\x64\x5f\146\x65\145"], "\165\x73\145\162" => $paylog["\x6f\x70\x65\x6e\x69\144"], "\164\151\x74\x6c\145" => urldecode($paylog["\x74\x69\164\x6c\145"]), "\x75\156\151\157\156\x74\x69\x64" => $paylog["\x75\156\x69\x6f\x6e\x74\x69\x64"]); goto lFoTU; n4y0c: if (is_error($wechat_payment_params)) { goto olDhd; } goto IWWnA; ik8xt: die(json_encode(array("\x65\x72\162\157\162" => "\61", "\x6d\x73\147" => "\346\234\x80\345\244\x9a\350\x83\xbd\xe9\200\201" . $reply["\x65\166\145\x72\171\157\x6e\145\x64\151\x61\155\157\156\x64"] . "\xe5\205\x83\347\244\xbc\xe7\x89\xa9\xef\xbc\214\xe7\xbb\231\xe5\x85\xb6\344\xbb\226\344\272\xba\347\x82\xb9\346\x9c\272\xe4\xbc\x9a\xe5\220\xa7\357\xbc\201"))); goto KzRsP; XJChU: $zq7q_ = !($reply["\x65\x6e\144\x74\x69\155\x65"] < time()); goto xNn2g; ebC6l: LjF53: goto XJChU; DG3Ih: $id = intval($_GPC["\151\x64"]); goto knVzn; n0Byp: $moduleid = pdo_getcolumn("\x6d\x6f\144\165\154\145\163", array("\x6e\141\155\x65" => $getparams["\155\x6f\144\165\154\x65"]), "\x6d\x69\144"); goto eFQ6n; OyTfo: goto s9I1h; goto ZyFaq; enwCn: HHDcG: goto UXxmY; IGhJP: $getparams = array("\155\x65\164\150\x6f\144" => "\x77\145\143\x68\141\164", "\x74\151\x64" => $tid, "\x74\x69\164\154\x65" => "\346\x94\xaf\344\273\x98" . $params["\x66\145\145"] . "\xe5\x85\x83", "\146\145\145" => $params["\x66\145\x65"], "\x6d\x6f\144\x75\154\x65" => "\x74\x79\172\155\x5f\144\x69\x61\x6d\x6f\x6e\x64\x76\157\164\145"); goto n0Byp; aUgPP: if ($t_9SB) { goto WkSzo; } goto qPjd5; EaWwc: tj6eM: goto MEos9; aZtLP: message(error(1, $wechat_payment_params), '', "\141\x6a\141\170", false); goto O4JLh; knVzn: $ty = $_GPC["\164\x79"]; goto rsu5v; eqEWS: $_W["\x75\x6e\151\x61\x63\151\144"] = $paylog["\x75\156\151\141\x63\151\144"]; goto aQmkq; pogrI: define("\111\x4e\137\x4d\x4f\x42\x49\114\105", true); goto m1ZWj; KZxkG: l4Ib6: goto tpYhM; sDhH6: die(json_encode(array("\145\x72\162\157\162" => "\61", "\155\163\x67" => "\xe8\xbf\231\xe4\xb8\xaa\350\xae\242\xe5\x8d\225\345\xb7\xb2\xe7\273\217\xe6\x94\257\xe4\273\230\346\210\220\345\x8a\x9f\54\40\344\270\x8d\xe9\234\x80\xe8\xa6\201\351\207\215\345\244\x8d\xe6\224\xaf\xe4\273\x98\x2e"))); goto KZxkG; Db1gE: die(json_encode(array("\x65\162\162\x6f\x72" => "\x31", "\155\x73\147" => "\346\xb4\xbb\xe5\x8a\xa8\xe5\xb7\xb2\xe7\273\x8f\347\xbb\x93\xe6\235\x9f"))); goto Hr8RG; Aw_Zu: $s9sTk = !empty($paylog); goto b2Crm; iNe8w: $lLXic = !empty($reply["\x73\x74\x61\164\165\163"]); goto jEkDX; KYjTB: if ($tqT2Q) { goto zz3ja; } goto kmFMk; t9d9Z: if (intval($wechat_payment["\163\167\151\x74\x63\x68"]) == 2 || intval($wechat_payment["\x73\167\151\x74\x63\x68"]) == 3) { goto Lysl5; } goto lViqW; vmOoR: $wechat_payment = $setting["\x70\141\171\x6d\x65\x6e\164"]["\x77\x65\143\150\x61\164"]; goto vAURB; lFoTU: $wechat_payment["\x6f\x70\145\x6e\x69\144"] = $_SESSION["\x6f\x61\165\x74\x68\137\x6f\x70\x65\156\151\144"]; goto t9d9Z; Hr8RG: aTIew: goto iNe8w; dJWmo: if ($aXeW_) { goto l4Ib6; } goto sDhH6; X6afz: olDhd: goto aZtLP; bjGiC: $uniontid = date("\x59\x6d\144\110\151\x73") . $moduleid . random(8, 1); goto u2BkI; tpYhM: $N1m9S = !(!empty($paylog) && empty($paylog["\x75\x6e\x69\157\x6e\x74\151\144"])); goto IXkyQ; UXxmY: WkSzo: goto hgkkH; Eb6Xl: $BYMSe = !($reply["\155\x69\156\156\x75\155\160\x65\157\x70\x6c\145"] > $jointotal); goto KCTHy; NuLw7: $giftdata = @unserialize($reply["\x67\x69\146\164\144\141\x74\141"]); goto b4iLT; aQmkq: $_W["\157\160\145\x6e\x69\144"] = $paylog["\x6f\160\145\156\x69\x64"]; goto bvry9; IXkyQ: if ($N1m9S) { goto tj6eM; } goto uU680; UIHkZ: $paylog["\160\x6c\151\x64"] = pdo_insertid(); goto UCQa_; wNgku: zaukj: goto JB6av; Nv9ub: die(json_encode(array("\x65\x72\162\157\162" => "\61", "\x6d\x73\x67" => "\xe6\264\273\345\x8a\xa8\xe8\277\230\xe6\x9c\xaa\345\xbc\200\xe5\xa7\x8b\xef\274\x8c\xe6\xb2\xa1\346\x9c\x89\xe8\276\276\xe5\x88\260\346\234\x80\xe5\260\217\xe5\217\202\350\265\x9b\344\xba\xba\346\225\260\xef\xbc\201"))); goto enwCn; unisb: $paylog = array("\165\156\151\141\x63\x69\144" => $_W["\x75\156\151\141\143\x69\144"], "\x61\x63\151\x64" => $_W["\141\143\151\x64"], "\157\160\145\x6e\151\144" => $userinfo["\x6f\141\x75\x74\x68\x5f\157\x70\145\x6e\151\x64"], "\x6d\x6f\x64\x75\x6c\145" => $getparams["\155\x6f\x64\x75\x6c\145"], "\x74\x69\144" => $getparams["\164\151\144"], "\x75\156\x69\x6f\156\x74\151\144" => $uniontid, "\x66\x65\145" => $getparams["\x66\145\x65"], "\143\141\162\x64\x5f\146\x65\x65" => $getparams["\x66\x65\x65"], "\x73\x74\x61\164\165\x73" => "\60", "\x69\x73\137\x75\x73\145\x63\x61\x72\x64" => "\x30"); goto o1u6V; JB6av: $W_GVw = !empty($reply); goto j_993; LcCTq: ylFB8: goto I_Vjp; DDFQX: $diamondsy = $reply["\145\x76\x65\x72\x79\x6f\156\x65\144\151\141\155\x6f\x6e\x64"] - $voteuser["\x67\151\x66\164\x63\157\x75\x6e\164"]; goto I0oMI; CXiXN: $wechat_payment["\x61\160\160\151\x64"] = $account["\153\x65\171"]; goto h4g3S; ea_s9: $t_9SB = empty($reply["\155\151\x6e\x6e\x75\155\160\145\x6f\160\154\x65"]); goto aUgPP; Ats8T: CdtB6: goto P1Igo; RKI8K: zz3ja: goto mcxZi; CpNM8: if ($diamondsy > 0) { goto aMdsA; } goto ik8xt; oOSsL: $t8w1D = !($reply["\163\164\x61\x72\164\x74\151\155\x65"] > time()); goto f46Tm; ZyFaq: Lysl5: goto YKaxW; b2Crm: if ($s9sTk) { goto D7dzJ; } goto unisb; AtPyk: goto MZ2yi; goto X6afz; lViqW: unset($wechat_payment["\163\x75\x62\137\x6d\143\x68\x5f\151\144"]); goto kIzjY; uB2Wy: goto suSj0; goto LcCTq; qPnAT: $vyW3x = !empty($oauth_openid); goto g0jFs; vAURB: $account = pdo_get("\x61\x63\143\x6f\165\x6e\x74\x5f\167\145\x63\150\x61\164\163", array("\x61\x63\151\144" => $wechat_payment["\x61\x63\143\157\x75\x6e\164"]), array("\153\145\x79", "\163\145\x63\162\145\x74")); goto CXiXN; Yu3Hq: load()->model("\x70\x61\x79\155\145\x6e\164"); goto X8ejA; mcxZi: $jointotal = pdo_fetchcolumn("\x53\105\114\x45\103\124\40\x43\117\x55\x4e\124\x28\151\144\51\x20\106\122\x4f\115\40" . tablename($this->tablevoteuser) . "\x20\127\110\105\x52\x45\40\x20\x20\162\x69\x64\x20\x3d\40\72\162\x69\144\40\x20" . $condition, array("\x3a\162\151\144" => $rid)); goto Eb6Xl; O4JLh: MZ2yi: goto Pv6SQ; uU680: pdo_update("\143\157\x72\145\x5f\x70\x61\171\x6c\x6f\x67", array("\x75\156\151\157\156\164\x69\144" => $uniontid), array("\160\154\x69\x64" => $paylog["\160\154\151\x64"])); goto EaWwc; jEkDX: if ($lLXic) { goto CdtB6; } goto ExIo3; LK668: is_weixin(); goto qEp_G; Pv6SQ: b5eDr: